---
layout: post
title: "[ToyProblem] 28_robotPath2"
subtitle: ""
date: 2021-08-31 09:00:00 +0900
categories: study
tags: algorithm
comments: true
published: false
---

# ê°œìš”

- ëª©ì°¨
  - [1.ë¬¸ì œâœ‰ï¸](#1.ë¬¸ì œ)
  - [2.ë ˆí¼ëŸ°ìŠ¤ì½”ë“œğŸ”–](#2.ë ˆí¼ëŸ°ìŠ¤ì½”ë“œ)
  - [3.í‚¤í¬ì¸íŠ¸ğŸ”](#3.í‚¤í¬ì¸íŠ¸ğŸ”‘)

# 1. ë¬¸ì œ

ì„¸ë¡œì™€ ê°€ë¡œì˜ ê¸¸ì´ê°€ ê°ê° M, Nì¸ ë°©ì˜ ì§€ë„ê°€ 2ì°¨ì› ë°°ì—´ë¡œ ì£¼ì–´ì¡Œì„ ë•Œ, 1ì€ ì¥ì• ë¬¼ì„ ì˜ë¯¸í•˜ê³  0 ì´ë™ì´ ê°€ëŠ¥í•œ í†µë¡œë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤. ë¡œë´‡ì€ í•œ ë²ˆì— ì„ì˜ì˜ kì¹¸ ì§ì§„ê³¼ 90ë„ íšŒì „ ì¤‘ 1ê°€ì§€ ë™ì‘ì„ í•  ìˆ˜ ìˆë‹¤. ë¡œë´‡ì˜ í˜„ì¬ ìœ„ì¹˜ì™€ ë°©í–¥, ëª©í‘œ ì§€ì ê³¼ ë°©í–¥ì´ í•¨ê»˜ ì£¼ì–´ì§‘ë‹ˆë‹¤. ì´ ë•Œ, ë°©í–¥ì€ ìœ„ìª½ì´ 1, ì˜¤ë¥¸ìª½ì´ 2, ì•„ë˜ìª½ì´ 3, ì™¼ìª½ì´ 4ë¡œ ì£¼ì–´ì§‘ë‹ˆë‹¤. ë¡œë´‡ì´ ëª©í‘œ ì§€ì ê¹Œì§€ ë„ë‹¬í•´ ëª©í‘œ ë°©í–¥ìœ¼ë¡œ íšŒì „í•˜ëŠ” ë° í•„ìš”í•œ ë™ì‘ì˜ ìˆ˜ë¥¼ ë¦¬í„´í•´ì•¼ í•©ë‹ˆë‹¤.

## ì…ë ¥

### ì¸ì 1 : room

- ë°°ì—´ì„ ìš”ì†Œë¡œ ê°–ëŠ” ë°°ì—´
- `room.length`ëŠ” M
- `room[i]`ëŠ” number íƒ€ì…ì„ ìš”ì†Œë¡œ ê°–ëŠ” ë°°ì—´
- `room[i].length`ëŠ” N
- `room[i][j]`ëŠ” ì„¸ë¡œë¡œ i, ê°€ë¡œë¡œ jì¸ ì§€ì ì˜ ì •ë³´ë¥¼ ì˜ë¯¸
- `room[i][j]`ëŠ” 0 ë˜ëŠ” 1

### ì¸ì 2 : src

- number íƒ€ì…ì„ ìš”ì†Œë¡œ ê°–ëŠ” ë°°ì—´
- `src.length`ëŠ” 2
- `src[i]`ëŠ” 0 ì´ìƒì˜ ì •ìˆ˜
- srcì˜ ìš”ì†ŒëŠ” ì°¨ë¡€ëŒ€ë¡œ ì¢Œí‘œí‰ë©´ ìœ„ì˜ yì¢Œí‘œ, xì¢Œí‘œ

### ì¸ì 3 : sDir

- `number` íƒ€ì…ì˜ ìì—°ìˆ˜

### ì¸ì 4 : dst

- `number` íƒ€ì…ì„ ìš”ì†Œë¡œ ê°–ëŠ” ë°°ì—´
- `dst.length`ëŠ” 2
- `dst[i]`ëŠ” 0 ì´ìƒì˜ ì •ìˆ˜
- `dst`ì˜ ìš”ì†ŒëŠ” ì°¨ë¡€ëŒ€ë¡œ ì¢Œí‘œí‰ë©´ ìœ„ì˜ yì¢Œí‘œ, xì¢Œí‘œ

### ì¸ì 5 : dDir

- `number` íƒ€ì…ì˜ ìì—°ìˆ˜

## ì¶œë ¥

- `number` íƒ€ì…ì„ ë¦¬í„´í•´ì•¼ í•©ë‹ˆë‹¤.

## ì£¼ì˜ì‚¬í•­

- M, Nì€ 20 ì´í•˜ì˜ ìì—°ìˆ˜ì…ë‹ˆë‹¤.
- `src`, `dst`ëŠ” í•­ìƒ ë¡œë´‡ì´ ì§€ë‚˜ê°ˆ ìˆ˜ ìˆëŠ” í†µë¡œì…ë‹ˆë‹¤.
- `src`ì—ì„œ `dst`ë¡œ ê°€ëŠ” ê²½ë¡œê°€ í•­ìƒ ì¡´ì¬í•©ë‹ˆë‹¤.
- ëª©í‘œ ì§€ì ì— ë„ë‹¬í•œ í›„ ë°©í–¥ê¹Œì§€ ì¼ì¹˜í•´ì•¼ í•©ë‹ˆë‹¤.
- ì§ì§„ì€ 1ì¹¸ ì§ì§„ì´ ì•„ë‹ˆë¼ ì„ì˜ì˜ kì¹¸ì„ ì§ì§„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì¦‰ í•œë²ˆì˜ ì§ì§„ ëª…ë ¹ìœ¼ë¡œ ì¥ì• ë¬¼ì´ ì—†ëŠ” í•œ ê³„ì† ê°ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- ì™¼ìª½ì—ì„œ ì˜¤ë¥¸ìª½ ë˜ëŠ” ì•„ë˜ì—ì„œ ìœ„ìª½ìœ¼ë¡œ ë°©í–¥ì„ ë°”ê¾¸ëŠ” ë° ì´ 2ë²ˆì˜ íšŒì „ ë™ì‘ì´ í•„ìš”í•©ë‹ˆë‹¤.

## ì…ì¶œë ¥ ì˜ˆì‹œ

```javascript
let room = [
  [0, 0, 0, 0],
  [0, 1, 1, 0],
  [0, 1, 0, 0],
  [0, 0, 1, 1],
];
let src = [3, 0];
let sDir = 3;
let dst = [2, 2];
let dDir = 2;
let output = robotPath2(room, src, sDir, dst, dDir);
console.log(output); // --> 11
/*
1. ì‹œì‘ - (3, 0)ì—ì„œ ì•„ë˜ ë°©í–¥ì„ í–¥í•œ ìƒíƒœ
ì¥ì• ë¬¼ì€ xë¡œ í‘œì‹œ, ì¶œë°œì§€ì ì€ së¡œ í‘œì‹œ
[
  [0, 0, 0, 0],
  [0, x, x, 0],
  [0, x, 0, 0],
  [s, 0, x, x],
] 

2. ë¡œë´‡ì€ ì•„ë˜ ë°©í–¥ì„ í–¥í•˜ê³  ìˆìŒ 
  3ì¸ ì´ìœ : ìœ„ë¡œ ê°€ê¸° ìœ„í•´ì„œëŠ” 90ë„ íšŒì „ì´ 2ë²ˆ, ì§ì§„ 1ë²ˆ í•„ìš”í•¨. ì§ì§„ í•œë²ˆìœ¼ë¡œ ë„ë‹¬í•  ìˆ˜ ìˆëŠ” ëª¨ë“  ì¹¸ì„ í‘œê¸°. 
  2ì¸ ì´ìœ : ì˜¤ë¥¸ìª½ìœ¼ë¡œ ê°€ê¸° ìœ„í•´ì„œëŠ” 90ë„ íšŒì „ 1ë²ˆ, ì§ì§„ 1ë²ˆì´ í•„ìš”í•¨
[
  [3, 0, 0, 0],
  [3, x, x, 0],
  [3, x, 0, 0],
  [s, 2, x, x],
] 

3. (0, 0) ì§€ì ì—ì„œ ë¡œë´‡ì€ ìœ„ ë°©í–¥ì„ í–¥í•˜ê³  ìˆìŒ 
  5ì¸ ì´ìœ : ì˜¤ë¥¸ìª½ìœ¼ë¡œ ê°€ê¸° ìœ„í•´ì„œëŠ” 90ë„ íšŒì „ì´ 1ë²ˆ, ì§ì§„ 1ë²ˆ í•„ìš”í•¨.
  1ì¸ ì´ìœ : ì§ì§„ 1ë²ˆìœ¼ë¡œ ì¶©ë¶„
[
  [3, 5, 5, 5],
  [3, x, x, 0],
  [3, x, 0, 0],
  [s, 2, x, x],
] 

4. ë¹„ìŠ·í•œ ë°©ì‹ìœ¼ë¡œ ê³„ì‚°í•˜ë©´ ìµœì¢…ì ìœ¼ë¡œ ë°©í–¥ ì „í™˜ê¹Œì§€ 11ë²ˆì´ ë‚˜ì˜¤ê²Œ ëœë‹¤.
*/

room = [
  [0, 0, 0, 0, 0, 0],
  [0, 1, 1, 0, 1, 0],
  [0, 1, 0, 0, 0, 0],
  [0, 0, 1, 1, 1, 0],
  [1, 0, 0, 0, 0, 0],
];
src = [4, 2];
sDir = 1;
dst = [2, 2];
dDir = 3;
output = robotPath2(room, src, sDir, dst, dDir);
console.log(output); // --> 7
```

---

# 2. ë ˆí¼ëŸ°ìŠ¤ ì½”ë“œ

```javascript
const robotPath2 = function (room, src, sDir, dst, dDir) {
  // ê°€ë¡œì™€ ì„¸ë¡œì˜ ê¸¸ì´
  const R = room.length;
  const C = room[0].length;
  // 4ê°€ì§€ ë°©í–¥: ìœ„(1), ì˜¤ë¥¸ìª½(2), ì•„ë˜(3), ì™¼ìª½(4)
  // ì°¨ë¡€ëŒ€ë¡œ [ë°©í–¥, ìƒí•˜ì´ë™, ì¢Œìš°ì´ë™]
  const MOVES = [
    [1, -1, 0], // UP
    [2, 0, 1], // RIGHT
    [3, 1, 0], // DOWN
    [4, 0, -1], // LEFT
  ];

  // ì¢Œí‘œê°€ ìœ íš¨í•œ ì¢Œí‘œì¸ì§€ í™•ì¸í•˜ëŠ” í•¨ìˆ˜
  const isValid = (row, col) => row >= 0 && row < R && col >= 0 && col < C;

  // ê° ìœ„ì¹˜ë³„ ìµœì†Œì˜ ë™ì‘ìœ¼ë¡œ ë„ë‹¬ ê°€ëŠ¥í•œ ê²½ìš°ì˜ ë°©í–¥ì„ ì €ì¥
  const directions = [];
  // ê° ìœ„ì¹˜ë³„ ìµœì†Œ ë™ì‘ì˜ ìˆ˜ë¥¼ ì €ì¥. í¸ì˜ìƒ ê±°ë¦¬(dist)ë¡œ í‘œí˜„
  const dist = [];
  for (let row = 0; row < R; row++) {
    directions.push(Array(C).fill(0));
    dist.push(Array(C).fill(Number.MAX_SAFE_INTEGER));
  }

  // bfs êµ¬í˜„ì„ ìœ„í•´ íë¥¼ ì„ ì–¸í•œë‹¤.
  const queue = Array(R * C);
  let front = 0;
  let rear = 0;
  const isEmpty = (queue) => front === rear;
  const enQueue = (queue, pos) => {
    queue[rear] = pos;
    rear++;
  };
  const deQueue = (queue) => {
    return queue[front++];
  };

  // ì¶œë°œ ì§€ì ì˜ ì¢Œí‘œ
  const [sRow, sCol] = src;
  directions[sRow][sCol] = sDir;
  dist[sRow][sCol] = 0;

  // ëª©í‘œ ì§€ì ì˜ ì¢Œí‘œ
  const [dRow, dCol] = dst;

  enQueue(queue, [sRow, sCol]);
  while (isEmpty(queue) === false) {
    const [row, col] = deQueue(queue);
    const dir = directions[row][col];

    for (move of MOVES) {
      const [nDir, rDiff, cDiff] = move;
      // ì´ë™í•  ì¢Œí‘œ
      const nRow = row + rDiff;
      const nCol = col + cDiff;

      // ìœ íš¨í•œ ì¢Œí‘œê°€ ì•„ë‹ˆê±°ë‚˜
      // í•´ë‹¹ ì¢Œí‘œê°€ ì¥ì• ë¬¼(1)ì¸ ê²½ìš° ê±´ë„ˆë›´ë‹¤.
      if (isValid(nRow, nCol) === false || room[nRow][nCol] === 1) continue;

      // í˜„ì¬ ìœ„ì¹˜ì˜ ë°©í–¥ê³¼ ëª©í‘œ ìœ„ì¹˜ì˜ ë°©í–¥ê³¼ì˜ ì°¨ì´
      const dDiff = Math.abs(nDir - dir);
      let candidate;
      if (dDiff === 0) {
        // ì°¨ì´ê°€ ì—†ëŠ” ê²½ìš°
        // ì¶œë°œ ì§€ì ì—ì„œì˜ ë°©í–¥ê³¼ ì´ë™í•˜ë ¤ëŠ” ë°©í–¥ì´ ê°™ì€ ê²½ìš°
        // ì§ì§„ë§Œ í•˜ë©´ ë˜ì§€ë§Œ ê·¸ëŸ¬ê¸° ìœ„í•´ì„œëŠ” 1ë¡œ ì´ˆê¸°í™” ë˜ì–´ì•¼ í•œë‹¤.
        candidate = dist[row][col] || 1;
      } else if (dDiff === 2) {
        // 2ë²ˆ íšŒì „í•´ì•¼ í•˜ëŠ” ê²½ìš°: íšŒì „ 2 + ì§ì§„ 1
        candidate = dist[row][col] + 3;
      } else {
        // 1ë²ˆë§Œ íšŒì „í•´ë„ ë˜ëŠ” ê²½ìš°: íšŒì „ 1 + ì§ì§„ 1
        candidate = dist[row][col] + 2;
      }

      if (nRow === dRow && nCol === dCol) {
        // ë‹¤ìŒì— ë„ë‹¬í•˜ëŠ” ê³³ì´ ëª©í‘œ ì§€ì ì¸ ê²½ìš°
        // ëª©í‘œ ë°©í–¥ê¹Œì§€ ê³ ë ¤í•´ì„œ í•„ìš”í•œ ê±°ë¦¬ë¥¼ ê³„ì‚°í•œë‹¤.
        const dDiff = Math.abs(nDir - dDir);
        if (dDiff === 0) {
          candidate = candidate;
        } else if (dDiff === 2) {
          candidate = candidate + 2;
        } else {
          candidate = candidate + 1;
        }
      }

      if (candidate < dist[nRow][nCol]) {
        // ìœ ë§í•œ ì¢Œí‘œëŠ” íì— ì‚½ì…í•œë‹¤.
        enQueue(queue, [nRow, nCol]);
        dist[nRow][nCol] = candidate;
        // ë°©í–¥ì€ ì „ë¶€ ê°™ë‹¤.
        directions[nRow][nCol] = nDir;
      }
    }
  }

  return dist[dRow][dCol];
};
```

---

# 3. í‚¤í¬ì¸íŠ¸

---
